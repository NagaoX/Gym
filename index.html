<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gym - Seu Treino</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Config for Custom Colors/Fonts -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'bounce-short': 'bounce 1s infinite 2',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom Scrollbar hide */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans selection:bg-black selection:text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- LISTA DE EXERCÍCIOS BÁSICOS (EXPANDIDA) ---
        const BASIC_EXERCISES_LIST = [
            "Agachamento Livre", "Agachamento Smith", "Leg Press 45°", "Cadeira Extensora", "Mesa Flexora", "Stiff", "Elevação Pélvica",
            "Supino Reto (Barra)", "Supino Inclinado (Halter)", "Crucifixo", "Peck Deck / Voador",
            "Puxada Alta / Frente", "Remada Baixa", "Remada Curvada", "Graviton",
            "Desenvolvimento Halteres", "Elevação Lateral", "Elevação Frontal", "Encolhimento",
            "Rosca Direta", "Rosca Martelo", "Rosca Scott",
            "Tríceps Corda", "Tríceps Testa", "Tríceps Francês", "Tríceps Pulley",
            "Abdominal Supra", "Abdominal Infra", "Prancha", "Esteira (Cardio)", "Bike (Cardio)"
        ];

        // --- BASE DE DADOS DE TREINOS (6 MODELOS) ---
        const WORKOUT_TEMPLATES = {
            female: {
                beginner: {
                    A: [
                        { id: 'fa1', name: "Agachamento Livre (Halter)", reps: "3 x 12", rest: "60", load: "Peso corpo/Leve", img: "imagens/agachamento_livre.gif" },
                        { id: 'fa2', name: "Leg Press 45°", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/leg_press_45.gif" },
                        { id: 'fa3', name: "Supino Máquina", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/supino_maquina.gif" },
                        { id: 'fa4', name: "Puxada Frente", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/puxada_frente.gif" },
                        { id: 'fa5', name: "Abdominal Supra", reps: "3 x 15", rest: "45", load: "-", img: "imagens/abdominal_supra.gif" }
                    ],
                    B: [
                        { id: 'fb1', name: "Afundo/Avanço", reps: "3 x 10 (cada)", rest: "60", load: "Peso corpo", img: "imagens/avanco_smith.gif" },
                        { id: 'fb2', name: "Mesa Flexora", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/flexora.gif" },
                        { id: 'fb3', name: "Desenvolvimento Halter", reps: "3 x 10", rest: "60", load: "Leve", img: "imagens/desenvolvimento_halter.gif" },
                        { id: 'fb4', name: "Rosca Direta", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/rosca_direta.gif" },
                        { id: 'fb5', name: "Tríceps Pulley", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/triceps_pulley.gif" }
                    ]
                },
                intermediate: {
                    // O modelo original que você já tinha
                    A: [
                        { id: 'a1', name: "Agachamento Smith", reps: "4 x 8-10", rest: "90", load: "20-35kg", img: "imagens/agachamento_smith.gif" },
                        { id: 'a2', name: "Leg Press 45°", reps: "3 x 10-12", rest: "60-90", load: "70-90kg", img: "imagens/leg_press_45.gif" },
                        { id: 'a3', name: "Avanço no Smith", reps: "3 x 10 (cada)", rest: "60", load: "10-15kg", img: "imagens/avanco_smith.gif" },
                        { id: 'a4', name: "Cadeira Extensora", reps: "3 x 12-15", rest: "45", load: "25-35kg", img: "imagens/cadeira_extensora.gif" },
                        { id: 'a5', name: "Panturrilha Smith", reps: "4 x 15-20", rest: "45", load: "30-45kg", img: "imagens/panturrilha_smith.gif" },
                        { id: 'a6', name: "Abdominal Supra", reps: "4 x 20", rest: "30", load: "Peso do corpo", img: "imagens/abdominal_supra.gif" }
                    ],
                    B: [
                        { id: 'b1', name: "Desenvolvimento Máq.", reps: "3 x 10-12", rest: "60", load: "10-15kg", img: "imagens/desenvolvimento_maquina.gif" },
                        { id: 'b2', name: "Elevação Lateral", reps: "4 x 12-15", rest: "45", load: "4-6kg", img: "imagens/elevacao_lateral.gif" },
                        { id: 'b3', name: "Tríceps Corda", reps: "3 x 12", rest: "45", load: "15-20kg", img: "imagens/triceps_corda.gif" },
                        { id: 'b4', name: "Tríceps Francês", reps: "3 x 12", rest: "45", load: "5-8kg", img: "imagens/triceps_frances.gif" },
                        { id: 'b5', name: "Abdominal Infra", reps: "4 x 15", rest: "30", load: "Peso do corpo", img: "imagens/abdominal_infra.gif" }
                    ],
                    C: [
                        { id: 'c1', name: "Elevação Pélvica", reps: "4 x 10-12", rest: "90", load: "40-60kg", img: "imagens/elevacao_pelvica.gif" },
                        { id: 'c2', name: "Stiff", reps: "4 x 10", rest: "60-90", load: "30-45kg", img: "imagens/stiff.gif" },
                        { id: 'c3', name: "Flexora", reps: "3 x 12", rest: "60", load: "30-45kg", img: "imagens/flexora.gif" },
                        { id: 'c4', name: "Cadeira Abdutora", reps: "3 x 15-20", rest: "45", load: "60-85kg", img: "imagens/cadeira_abdutora.gif" },
                        { id: 'c5', name: "Agachamento Sumô", reps: "3 x 12", rest: "60", load: "16-24kg", img: "imagens/agachamento_sumo.gif" },
                        { id: 'c6', name: "Prancha Abdominal", reps: "4 x 45s", rest: "30", load: "Isometria", img: "imagens/prancha.gif" }
                    ],
                    D: [
                        { id: 'd1', name: "Graviton", reps: "3 x 10-12", rest: "60", load: "P/ 10 reps", img: "imagens/graviton.gif" },
                        { id: 'd2', name: "Puxada Frente", reps: "3 x 12", rest: "60", load: "25-35kg", img: "imagens/puxada_frente.gif" },
                        { id: 'd3', name: "Supino Máquina", reps: "3 x 12", rest: "60", load: "15-25kg", img: "imagens/supino_maquina.gif" },
                        { id: 'd4', name: "Remada Baixa", reps: "3 x 12", rest: "60", load: "25-35kg", img: "imagens/remada_baixa.gif" },
                        { id: 'd5', name: "Rosca Halter", reps: "3 x 12", rest: "45", load: "5-7kg", img: "imagens/rosca_halter.gif" },
                        { id: 'd6', name: "Abdominal Remador", reps: "4 x Falha", rest: "30", load: "Peso corpo", img: "imagens/abdominal_remador.gif" }
                    ]
                },
                advanced: {
                    A: [ // Glúteos e Posterior Foco
                        { id: 'aa1', name: "Elevação Pélvica", reps: "4 x 8-10", rest: "90", load: "Pesado", img: "imagens/elevacao_pelvica.gif" },
                        { id: 'aa2', name: "RDL / Stiff", reps: "4 x 10", rest: "90", load: "Pesado", img: "imagens/stiff.gif" },
                        { id: 'aa3', name: "Mesa Flexora", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/flexora.gif" },
                        { id: 'aa4', name: "Cadeira Abdutora", reps: "3 x 20", rest: "45", load: "Moderado", img: "imagens/cadeira_abdutora.gif" }
                    ],
                    B: [ // Superiores Completo
                        { id: 'ab1', name: "Puxada Frente", reps: "4 x 10", rest: "60", load: "Moderado", img: "imagens/puxada_frente.gif" },
                        { id: 'ab2', name: "Remada Curvada", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/remada_curvada.gif" },
                        { id: 'ab3', name: "Desenvolvimento", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/desenvolvimento_halter.gif" },
                        { id: 'ab4', name: "Elevação Lateral", reps: "4 x 15", rest: "45", load: "Leve", img: "imagens/elevacao_lateral.gif" }
                    ],
                    C: [ // Quadríceps Foco
                        { id: 'ac1', name: "Agachamento Livre", reps: "4 x 8", rest: "120", load: "Pesado", img: "imagens/agachamento_livre.gif" },
                        { id: 'ac2', name: "Leg Press 45", reps: "4 x 10", rest: "90", load: "Pesado", img: "imagens/leg_press_45.gif" },
                        { id: 'ac3', name: "Cadeira Extensora", reps: "3 x 15", rest: "60", load: "Moderado", img: "imagens/cadeira_extensora.gif" },
                        { id: 'ac4', name: "Panturrilha", reps: "4 x 15", rest: "45", load: "Moderado", img: "imagens/panturrilha_smith.gif" }
                    ],
                    D: [ // Cardio e Core
                        { id: 'ad1', name: "HIIT Esteira", reps: "20 min", rest: "-", load: "-", img: "imagens/esteira.gif" },
                        { id: 'ad2', name: "Prancha", reps: "4 x 1 min", rest: "60", load: "-", img: "imagens/prancha.gif" },
                        { id: 'ad3', name: "Abdominal Infra", reps: "4 x 15", rest: "45", load: "-", img: "imagens/abdominal_infra.gif" }
                    ]
                }
            },
            male: {
                beginner: {
                    A: [ // Superior
                        { id: 'ma1', name: "Supino Reto Máquina", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/supino_maquina.gif" },
                        { id: 'ma2', name: "Puxada Frente", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/puxada_frente.gif" },
                        { id: 'ma3', name: "Desenvolvimento Máq", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/desenvolvimento_maquina.gif" },
                        { id: 'ma4', name: "Rosca Direta", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/rosca_direta.gif" },
                        { id: 'ma5', name: "Tríceps Pulley", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/triceps_pulley.gif" }
                    ],
                    B: [ // Inferior + Abs
                        { id: 'mb1', name: "Leg Press 45", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/leg_press_45.gif" },
                        { id: 'mb2', name: "Cadeira Extensora", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/cadeira_extensora.gif" },
                        { id: 'mb3', name: "Mesa Flexora", reps: "3 x 12", rest: "60", load: "Leve", img: "imagens/flexora.gif" },
                        { id: 'mb4', name: "Panturrilha", reps: "3 x 15", rest: "45", load: "Leve", img: "imagens/panturrilha_smith.gif" },
                        { id: 'mb5', name: "Abdominal Supra", reps: "3 x 20", rest: "45", load: "-", img: "imagens/abdominal_supra.gif" }
                    ]
                },
                intermediate: { // ABC (Push/Pull/Legs)
                    A: [ // Empurrar (Peito/Ombro/Tríceps)
                        { id: 'mia1', name: "Supino Reto Barra", reps: "4 x 8-10", rest: "90", load: "Moderado", img: "imagens/supino_reto.gif" },
                        { id: 'mia2', name: "Supino Inclinado Halter", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/supino_inclinado.gif" },
                        { id: 'mia3', name: "Desenvolvimento Halter", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/desenvolvimento_halter.gif" },
                        { id: 'mia4', name: "Elevação Lateral", reps: "4 x 12", rest: "45", load: "Leve", img: "imagens/elevacao_lateral.gif" },
                        { id: 'mia5', name: "Tríceps Corda", reps: "3 x 12", rest: "45", load: "Moderado", img: "imagens/triceps_corda.gif" }
                    ],
                    B: [ // Puxar (Costas/Bíceps)
                        { id: 'mib1', name: "Puxada Frente", reps: "4 x 10", rest: "60", load: "Moderado", img: "imagens/puxada_frente.gif" },
                        { id: 'mib2', name: "Remada Baixa", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/remada_baixa.gif" },
                        { id: 'mib3', name: "Remada Curvada", reps: "3 x 10", rest: "90", load: "Moderado", img: "imagens/remada_curvada.gif" },
                        { id: 'mib4', name: "Rosca Direta", reps: "3 x 10", rest: "45", load: "Moderado", img: "imagens/rosca_direta.gif" },
                        { id: 'mib5', name: "Rosca Martelo", reps: "3 x 12", rest: "45", load: "Moderado", img: "imagens/rosca_martelo.gif" }
                    ],
                    C: [ // Pernas
                        { id: 'mic1', name: "Agachamento Livre", reps: "4 x 8", rest: "120", load: "Pesado", img: "imagens/agachamento_livre.gif" },
                        { id: 'mic2', name: "Leg Press 45", reps: "4 x 10", rest: "90", load: "Pesado", img: "imagens/leg_press_45.gif" },
                        { id: 'mic3', name: "Cadeira Extensora", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/cadeira_extensora.gif" },
                        { id: 'mic4', name: "Mesa Flexora", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/flexora.gif" },
                        { id: 'mic5', name: "Panturrilha", reps: "4 x 15", rest: "45", load: "Moderado", img: "imagens/panturrilha_smith.gif" }
                    ]
                },
                advanced: { // ABCD
                    A: [ // Peito e Tríceps
                        { id: 'maa1', name: "Supino Reto", reps: "4 x 6-8", rest: "120", load: "Pesado", img: "imagens/supino_reto.gif" },
                        { id: 'maa2', name: "Supino Inclinado", reps: "3 x 8-10", rest: "90", load: "Pesado", img: "imagens/supino_inclinado.gif" },
                        { id: 'maa3', name: "Crucifixo Máquina", reps: "3 x 12", rest: "60", load: "Moderado", img: "imagens/peck_deck.gif" },
                        { id: 'maa4', name: "Tríceps Testa", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/triceps_testa.gif" },
                        { id: 'maa5', name: "Tríceps Corda", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/triceps_corda.gif" }
                    ],
                    B: [ // Costas e Bíceps
                        { id: 'mab1', name: "Barra Fixa / Graviton", reps: "4 x Falha", rest: "90", load: "-", img: "imagens/graviton.gif" },
                        { id: 'mab2', name: "Remada Curvada", reps: "4 x 8", rest: "90", load: "Pesado", img: "imagens/remada_curvada.gif" },
                        { id: 'mab3', name: "Puxada Frente", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/puxada_frente.gif" },
                        { id: 'mab4', name: "Rosca Direta Barra", reps: "3 x 10", rest: "60", load: "Moderado", img: "imagens/rosca_direta.gif" },
                        { id: 'mab5', name: "Rosca Scott", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/rosca_scott.gif" }
                    ],
                    C: [ // Pernas
                        { id: 'mac1', name: "Agachamento Livre", reps: "4 x 6-8", rest: "180", load: "Pesado", img: "imagens/agachamento_livre.gif" },
                        { id: 'mac2', name: "Leg Press 45", reps: "4 x 10", rest: "120", load: "Pesado", img: "imagens/leg_press_45.gif" },
                        { id: 'mac3', name: "Stiff", reps: "3 x 10", rest: "90", load: "Moderado", img: "imagens/stiff.gif" },
                        { id: 'mac4', name: "Cadeira Extensora", reps: "3 x 15", rest: "60", load: "Leve", img: "imagens/cadeira_extensora.gif" },
                        { id: 'mac5', name: "Panturrilha", reps: "5 x 15", rest: "45", load: "Moderado", img: "imagens/panturrilha_smith.gif" }
                    ],
                    D: [ // Ombros e Trapézio
                        { id: 'mad1', name: "Desenvolvimento Militar", reps: "4 x 8", rest: "90", load: "Pesado", img: "imagens/desenvolvimento_halter.gif" },
                        { id: 'mad2', name: "Elevação Lateral", reps: "4 x 12", rest: "45", load: "Leve", img: "imagens/elevacao_lateral.gif" },
                        { id: 'mad3', name: "Elevação Frontal", reps: "3 x 12", rest: "45", load: "Leve", img: "imagens/elevacao_frontal.gif" },
                        { id: 'mad4', name: "Encolhimento", reps: "4 x 15", rest: "45", load: "Pesado", img: "imagens/encolhimento.gif" }
                    ]
                }
            }
        };

        // --- ÍCONES SVG NATIVOS ---
        const IconBase = ({ children, size = 24, color = "currentColor", strokeWidth = 2, className = "", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {children}
            </svg>
        );

        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></IconBase>;
        const Calendar = (props) => <IconBase {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2" /><line x1="16" y1="2" x2="16" y2="6" /><line x1="8" y1="2" x2="8" y2="6" /><line x1="3" y1="10" x2="21" y2="10" /></IconBase>;
        const Plus = (props) => <IconBase {...props}><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></IconBase>;
        const User = (props) => <IconBase {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></IconBase>;
        const Settings = (props) => <IconBase {...props}><circle cx="12" cy="12" r="3" /><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" /></IconBase>;
        const Edit2 = (props) => <IconBase {...props}><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" /></IconBase>;
        const X = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12" /></IconBase>;
        const ChevronLeft = (props) => <IconBase {...props}><polyline points="15 18 9 12 15 6" /></IconBase>;
        const Dumbbell = (props) => <IconBase {...props}><path d="m6.5 6.5 11 11" /><path d="m21 21-1-1" /><path d="m3 3 1 1" /><path d="m18 22 4-4" /><path d="m2 6 4-4" /><path d="m3 10 7-7" /><path d="m14 21 7-7" /></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M8 21h8" /><path d="M12 17v4" /><path d="M7 4h10" /><path d="M17 4v6a5 5 0 1 1-10 0V4" /><path d="M5 9v1a10 10 0 0 0 10 10" /><path d="M19 9v1a10 10 0 0 1-10 10" /></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12" /><polyline points="12 5 19 12 12 19" /></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></IconBase>;
        const MoreHorizontal = (props) => <IconBase {...props}><circle cx="12" cy="12" r="1" /><circle cx="19" cy="12" r="1" /><circle cx="5" cy="12" r="1" /></IconBase>;
        const AlertTriangle = (props) => <IconBase {...props}><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" /><line x1="12" y1="9" x2="12" y2="13" /><line x1="12" y1="17" x2="12.01" y2="17" /></IconBase>;


        // --- COMPONENTE: SWITCH (IOS STYLE) ---
        const Switch = ({ enabled, setEnabled }) => (
            <button
                onClick={(e) => { e.stopPropagation(); setEnabled(!enabled); }}
                className={`${enabled ? 'bg-green-500' : 'bg-gray-200'} relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`}
            >
                <span className={`${enabled ? 'translate-x-6' : 'translate-x-1'} inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 shadow-sm`} />
            </button>
        );

        // --- COMPONENTE: SWIPEABLE ITEM (SWIPE TO DELETE) ---
        const SwipeableListItem = ({ children, onDelete }) => {
            const [offsetX, setOffsetX] = useState(0);
            const [startX, setStartX] = useState(0);
            const [isSwiping, setIsSwiping] = useState(false);

            const onTouchStart = (e) => {
                setStartX(e.touches[0].clientX);
                setIsSwiping(true);
            };

            const onTouchMove = (e) => {
                if (!isSwiping) return;
                const currentX = e.touches[0].clientX;
                const diff = currentX - startX;
                if (diff < 0 && diff > -100) {
                    setOffsetX(diff);
                }
            };

            const onTouchEnd = () => {
                setIsSwiping(false);
                if (offsetX < -40) {
                    setOffsetX(-80);
                } else {
                    setOffsetX(0);
                }
            };

            return (
                <div className="relative overflow-hidden mb-3 rounded-2xl">
                    <div className="absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-2xl">
                        <button onClick={onDelete} className="text-white flex items-center gap-2">
                            <span className="text-xs font-bold uppercase">Excluir</span>
                            <Trash2 size={24} />
                        </button>
                    </div>
                    <div
                        className="bg-white relative z-10 transition-transform duration-200 ease-out"
                        style={{ transform: `translateX(${offsetX}px)` }}
                        onTouchStart={onTouchStart}
                        onTouchMove={onTouchMove}
                        onTouchEnd={onTouchEnd}
                    >
                        {children}
                    </div>
                </div>
            );
        };


        // --- COMPONENTE: CARD DE EXERCÍCIO ---
        const ExerciseCard = ({ exercise, isDone, onCheck, onEdit }) => {
            const [showImg, setShowImg] = useState(false);

            return (
                <div className={`bg-white rounded-[24px] p-5 mb-4 shadow-sm border transition-all duration-300 ${isDone ? 'border-green-400 bg-green-50/30' : 'border-gray-100'}`}>
                    <div className="flex items-start gap-4">
                        <button 
                            onClick={onCheck}
                            className={`mt-1 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 shrink-0 ${isDone ? 'bg-green-500 border-green-500 text-white scale-110 shadow-md' : 'bg-transparent border-gray-300 hover:border-green-400 text-transparent'}`}
                        >
                            <Check size={18} strokeWidth={3} />
                        </button>
                        <div className="flex-1 min-w-0" onClick={() => !isDone && onCheck()}>
                            <h4 className={`font-bold text-gray-900 text-lg leading-tight transition-all ${isDone ? 'opacity-50 line-through decoration-2' : ''}`}>
                                {exercise.name}
                            </h4>
                            <div className={`flex flex-wrap items-center gap-2 mt-2 ${isDone ? 'opacity-50' : ''}`}>
                                <div className="bg-gray-100 px-3 py-1 rounded-lg text-xs font-bold text-gray-600 uppercase tracking-wide">
                                    {exercise.reps} Reps
                                </div>
                                <div className="bg-gray-100 px-3 py-1 rounded-lg text-xs font-bold text-gray-600 uppercase tracking-wide">
                                    {exercise.load}
                                </div>
                                <div className="bg-gray-100 px-3 py-1 rounded-lg text-xs font-bold text-gray-600 uppercase tracking-wide flex items-center gap-1">
                                    ⏱ {exercise.rest}s
                                </div>
                            </div>
                        </div>
                        <div className="flex flex-col items-center gap-3 shrink-0">
                            <Switch enabled={showImg} setEnabled={setShowImg} />
                            <button 
                                onClick={(e) => { e.stopPropagation(); onEdit(); }}
                                className="p-2 text-gray-300 hover:text-black hover:bg-gray-100 rounded-full transition-colors"
                            >
                                <Edit2 size={16} />
                            </button>
                        </div>
                    </div>
                    <div className={`transition-all duration-300 overflow-hidden ${showImg ? 'max-h-64 mt-4 opacity-100' : 'max-h-0 opacity-0'}`}>
                        <div className="rounded-2xl overflow-hidden aspect-video bg-gray-200 relative flex items-center justify-center">
                            <img 
                                src={exercise.img} 
                                alt={exercise.name} 
                                className="w-full h-full object-cover" 
                                onError={(e) => {
                                    e.target.style.display = 'none';
                                    e.target.parentElement.innerHTML = `<div class='flex flex-col items-center justify-center h-full w-full bg-gray-100 text-gray-400 text-xs text-center p-4'><span class='font-bold mb-1'>Foto não encontrada</span>Salvar como:<br/>${exercise.img}</div>`;
                                }}
                            />
                            <div className="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"></div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        const FlexLogApp = () => {
            const [user, setUser] = useState(null);
            const [view, setView] = useState('loading'); 
            const [currentWorkout, setCurrentWorkout] = useState(null);
            const [completedExercises, setCompletedExercises] = useState([]);
            const [showFinishedModal, setShowFinishedModal] = useState(false);
            const [editingIndex, setEditingIndex] = useState(null);
            const [showAddModal, setShowAddModal] = useState(false);
            const [isCustomExercise, setIsCustomExercise] = useState(false);

            // Novos estados para o cadastro
            const [newUserName, setNewUserName] = useState('');
            const [newUserGender, setNewUserGender] = useState('female');
            const [newUserLevel, setNewUserLevel] = useState('beginner');

            useEffect(() => {
                const saved = localStorage.getItem('gym_user_v2'); // Versão 2 para nova estrutura
                if (saved) {
                    setUser(JSON.parse(saved));
                    setView('dashboard');
                } else {
                    setView('disclaimer'); // Start at disclaimer if no user
                }
            }, []);

            useEffect(() => {
                if (user) {
                    localStorage.setItem('gym_user_v2', JSON.stringify(user));
                }
            }, [user]);

            const getSuggestedWorkout = () => {
                if (!user?.workouts) return 'A';
                if (!user?.history || user.history.length === 0) return 'A';
                
                const last = user.history[user.history.length - 1].type;
                const types = Object.keys(user.workouts); // Dinâmico (A, B, C...)
                const nextIndex = (types.indexOf(last) + 1) % types.length;
                return types[nextIndex];
            };

            const suggested = useMemo(() => getSuggestedWorkout(), [user]);

            const getDaysRemaining = () => {
                if (!user?.history) return 60;
                return Math.max(0, 60 - user.history.length);
            };

            const handleLogin = () => {
                if (!newUserName) return;

                // Seleciona o template correto
                const selectedWorkouts = WORKOUT_TEMPLATES[newUserGender][newUserLevel];

                const newUser = {
                    name: newUserName,
                    gender: newUserGender,
                    level: newUserLevel,
                    workouts: selectedWorkouts, // Carrega o treino específico
                    history: []
                };
                setUser(newUser);
                setView('dashboard');
            };

            const startWorkout = (type) => {
                setCurrentWorkout(type);
                setCompletedExercises([]);
                setView('workout');
            };

            const goToEditMode = (type) => {
                setCurrentWorkout(type);
                setView('edit_workout');
            }

            const finishWorkout = () => {
                const today = new Date().toLocaleDateString('pt-BR');
                const newHistory = [...user.history, { date: today, type: currentWorkout }];
                setUser({ ...user, history: newHistory });
                setShowFinishedModal(true);
            };

            const saveEdit = (reps, load, rest) => {
                const newWorkouts = { ...user.workouts };
                newWorkouts[currentWorkout][editingIndex] = {
                    ...newWorkouts[currentWorkout][editingIndex],
                    reps,
                    load,
                    rest
                };
                setUser({ ...user, workouts: newWorkouts });
                setEditingIndex(null);
            };

            const removeExercise = (indexToRemove) => {
                if(confirm("Tem certeza que deseja excluir este exercício?")){
                    const updatedExercises = user.workouts[currentWorkout].filter((_, idx) => idx !== indexToRemove);
                    setUser({
                        ...user,
                        workouts: {
                            ...user.workouts,
                            [currentWorkout]: updatedExercises
                        }
                    });
                }
            };

            const addExercise = (data) => {
                const newExercise = {
                    id: Date.now().toString(), 
                    name: data.name,
                    reps: data.reps,
                    load: data.load,
                    rest: data.rest,
                    img: data.img || "imagens/placeholder.gif" 
                };

                setUser({
                    ...user,
                    workouts: {
                        ...user.workouts,
                        [currentWorkout]: [...user.workouts[currentWorkout], newExercise]
                    }
                });
                setShowAddModal(false);
                setIsCustomExercise(false); 
            };

            // Views
            if (view === 'loading') return null;

            if (view === 'disclaimer') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-white animate-fade-in relative">
                        <div className="w-full max-w-sm bg-white rounded-3xl shadow-2xl border border-gray-100 p-8 text-center">
                            <div className="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <AlertTriangle className="text-red-500" size={32} />
                            </div>
                            <h2 className="text-xl font-black text-gray-900 mb-4 uppercase tracking-wide">Aviso Importante<br/>de Saúde e Segurança</h2>
                            <div className="text-sm text-gray-600 space-y-4 text-justify leading-relaxed mb-8 max-h-60 overflow-y-auto pr-2 scrollbar-thin">
                                <p>
                                    Os treinos e exercícios pré-carregados neste aplicativo possuem caráter exclusivamente ilustrativo, servindo apenas para demonstrar as funcionalidades do sistema.
                                </p>
                                <p>
                                    O desenvolvedor deste aplicativo não é um profissional de educação física ou da área da saúde. O conteúdo aqui presente não substitui, em hipótese alguma, a orientação e prescrição de um Profissional de Educação Física habilitado.
                                </p>
                                <p>
                                    Antes de iniciar qualquer atividade física, consulte um profissional para avaliar suas condições físicas e prescrever um treino adequado aos seus objetivos e limitações. A prática de exercícios sem orientação pode resultar em lesões graves.
                                </p>
                            </div>
                            
                            <div className="flex flex-col gap-3">
                                <button 
                                    onClick={() => setView('login')}
                                    className="w-full bg-black text-white p-4 rounded-2xl font-bold text-lg hover:scale-[1.02] active:scale-95 transition-all shadow-lg"
                                >
                                    Concordo
                                </button>
                                <button 
                                    onClick={() => setView('goodbye')}
                                    className="w-full bg-gray-100 text-gray-500 p-4 rounded-2xl font-bold text-lg hover:bg-gray-200 transition-all"
                                >
                                    Sair
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'goodbye') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-gray-50 animate-fade-in">
                        <div className="text-center">
                            <h1 className="text-2xl font-bold text-gray-400 mb-2">Aplicação Encerrada</h1>
                            <p className="text-gray-400 text-sm">Você optou por não concordar com os termos.</p>
                            <button 
                                onClick={() => setView('disclaimer')}
                                className="mt-8 text-blue-500 font-bold text-sm underline"
                            >
                                Voltar ao início
                            </button>
                        </div>
                    </div>
                );
            }

            if (view === 'login') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-white animate-fade-in">
                        <div className="w-16 h-16 bg-black rounded-2xl flex items-center justify-center mb-6 shadow-xl">
                            <Dumbbell className="text-white" size={32} />
                        </div>
                        <h1 className="text-3xl font-black mb-2 tracking-tight text-center">Gym</h1>
                        <p className="text-gray-500 mb-8 text-center max-w-xs">Monte seu perfil para gerar o treino ideal.</p>
                        
                        <div className="w-full max-w-sm space-y-6">
                            
                            {/* Nome */}
                            <div>
                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Seu Nome</label>
                                <input 
                                    type="text" 
                                    value={newUserName}
                                    onChange={(e) => setNewUserName(e.target.value)}
                                    placeholder="Ex: João Silva"
                                    className="w-full p-4 rounded-2xl bg-gray-100 text-lg font-medium outline-none focus:ring-2 focus:ring-black transition-all"
                                />
                            </div>

                            {/* Gênero */}
                            <div>
                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Gênero</label>
                                <div className="grid grid-cols-2 gap-3">
                                    <button 
                                        onClick={() => setNewUserGender('male')}
                                        className={`p-4 rounded-2xl font-bold transition-all ${newUserGender === 'male' ? 'bg-black text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}
                                    >
                                        Homem
                                    </button>
                                    <button 
                                        onClick={() => setNewUserGender('female')}
                                        className={`p-4 rounded-2xl font-bold transition-all ${newUserGender === 'female' ? 'bg-black text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}
                                    >
                                        Mulher
                                    </button>
                                </div>
                            </div>

                            {/* Nível */}
                            <div>
                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Nível de Experiência</label>
                                <div className="space-y-2">
                                    <button 
                                        onClick={() => setNewUserLevel('beginner')}
                                        className={`w-full p-4 rounded-2xl font-bold text-left transition-all flex justify-between items-center ${newUserLevel === 'beginner' ? 'bg-black text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}
                                    >
                                        <span>Iniciante</span>
                                        {newUserLevel === 'beginner' && <Check size={18} />}
                                    </button>
                                    <button 
                                        onClick={() => setNewUserLevel('intermediate')}
                                        className={`w-full p-4 rounded-2xl font-bold text-left transition-all flex justify-between items-center ${newUserLevel === 'intermediate' ? 'bg-black text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}
                                    >
                                        <span>Intermediário</span>
                                        {newUserLevel === 'intermediate' && <Check size={18} />}
                                    </button>
                                    <button 
                                        onClick={() => setNewUserLevel('advanced')}
                                        className={`w-full p-4 rounded-2xl font-bold text-left transition-all flex justify-between items-center ${newUserLevel === 'advanced' ? 'bg-black text-white shadow-lg' : 'bg-gray-100 text-gray-400'}`}
                                    >
                                        <span>Avançado</span>
                                        {newUserLevel === 'advanced' && <Check size={18} />}
                                    </button>
                                </div>
                            </div>

                            <button 
                                onClick={handleLogin}
                                className="w-full bg-black text-white p-4 rounded-2xl font-bold text-lg hover:scale-[1.02] active:scale-95 transition-all shadow-lg mt-4"
                            >
                                Gerar Treino
                            </button>
                        </div>
                    </div>
                );
            }

            if (view === 'dashboard') {
                const today = new Date();
                const currentDay = today.getDay(); 
                const diffToMonday = today.getDate() - currentDay + (currentDay === 0 ? -6 : 1);
                
                const monday = new Date(today);
                monday.setDate(diffToMonday);
                
                const weekDays = [];
                for (let i = 0; i < 7; i++) {
                    const d = new Date(monday);
                    d.setDate(monday.getDate() + i);
                    weekDays.push(d);
                }

                // Chaves de treino disponíveis (A, B, C...)
                const workoutKeys = Object.keys(user.workouts);

                return (
                    <div className="max-w-lg mx-auto min-h-screen pb-24 animate-fade-in relative">
                        <header className="p-6 pt-10 flex justify-between items-end bg-white border-b border-gray-100 sticky top-0 z-10 shadow-sm/50">
                            <div>
                                <p className="text-gray-500 font-medium text-sm">Bem-vindo(a) de volta,</p>
                                <h2 className="text-3xl font-black tracking-tight text-gray-900">{user.name}</h2>
                            </div>
                            <button 
                                onClick={() => {
                                    if(confirm("Deseja sair e trocar de usuário?")) {
                                        setUser(null);
                                        setView('disclaimer'); // Volta para o disclaimer
                                    }
                                }}
                                className="w-12 h-12 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-xl font-bold text-gray-700 hover:bg-gray-200 transition-colors"
                                title="Trocar Usuário"
                            >
                                {user.name.charAt(0).toUpperCase()}
                            </button>
                        </header>

                        <main className="p-6 space-y-8">
                            
                            <div className="bg-orange-50 rounded-2xl p-4 border border-orange-100 flex items-center gap-4">
                                <div className="bg-orange-100 p-2 rounded-xl text-orange-600">
                                    <Trophy size={20} />
                                </div>
                                <div>
                                    <h4 className="text-sm font-bold text-orange-900">Ciclo de Adaptação</h4>
                                    <p className="text-xs text-orange-700 mt-0.5">Troque o treino em <b>{getDaysRemaining()} dias</b>.</p>
                                </div>
                                <div className="ml-auto text-xs font-bold bg-white px-2 py-1 rounded-md text-orange-600 border border-orange-200 shadow-sm">
                                    {user.history.length}/60
                                </div>
                            </div>

                            <section>
                                <div className="flex items-center gap-2 mb-3">
                                    <div className="h-2 w-2 rounded-full bg-black"></div>
                                    <h3 className="font-bold text-lg">Sugestão de Hoje</h3>
                                </div>
                                <button 
                                    onClick={() => startWorkout(suggested)}
                                    className="w-full bg-black text-white p-6 rounded-[32px] shadow-xl hover:shadow-2xl transition-all active:scale-[0.98] group relative overflow-hidden"
                                >
                                    <div className="absolute top-0 right-0 p-8 opacity-10">
                                        <Dumbbell size={100} />
                                    </div>
                                    <div className="relative z-10 flex justify-between items-center">
                                        <div className="text-left">
                                            <span className="bg-white/20 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider backdrop-blur-sm">Recomendado</span>
                                            <h2 className="text-4xl font-black mt-2 italic">TREINO {suggested}</h2>
                                            <p className="text-white/60 text-sm mt-1 font-medium">{user.workouts[suggested]?.length || 0} exercícios</p>
                                        </div>
                                        <div className="bg-white text-black h-12 w-12 rounded-full flex items-center justify-center group-hover:translate-x-1 transition-transform">
                                            <ArrowRight size={24} />
                                        </div>
                                    </div>
                                </button>
                            </section>

                            <section>
                                <div className="flex items-center gap-2 mb-3">
                                    <div className="h-2 w-2 rounded-full bg-gray-300"></div>
                                    <h3 className="font-bold text-lg text-gray-500">Todos os Treinos</h3>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    {workoutKeys.map(type => (
                                        <div key={type} className="relative group">
                                            <button 
                                                onClick={() => startWorkout(type)}
                                                className={`w-full p-5 rounded-[24px] text-left border-2 transition-all hover:border-black ${suggested === type ? 'border-gray-300 bg-gray-50 opacity-50' : 'bg-white border-transparent shadow-sm'}`}
                                            >
                                                <div className="flex justify-between items-start mb-4">
                                                    <span className="text-2xl font-black text-gray-900 italic">{type}</span>
                                                    {suggested === type && <div className="h-2 w-2 bg-black rounded-full"></div>}
                                                </div>
                                                <div className="text-xs font-bold text-gray-400 uppercase tracking-wider group-hover:text-gray-600">
                                                    {user.workouts[type].length} Exercícios
                                                </div>
                                            </button>
                                            
                                            <button
                                                onClick={(e) => { e.stopPropagation(); goToEditMode(type); }}
                                                className="absolute top-3 right-3 p-2 bg-gray-100 rounded-full hover:bg-gray-200 text-gray-500 hover:text-black transition-colors z-10 shadow-sm"
                                                title="Editar Treino"
                                            >
                                                <Settings size={16} />
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            <section className="bg-white rounded-[24px] p-5 shadow-sm border border-gray-100">
                                <div className="flex items-center gap-2 mb-4">
                                    <Calendar size={18} className="text-blue-500" />
                                    <h3 className="font-bold text-gray-900">Esta Semana</h3>
                                </div>
                                <div className="flex justify-between items-end">
                                    {weekDays.map((d, i) => {
                                        const dateStr = d.toLocaleDateString('pt-BR');
                                        const workoutDone = user.history.find(h => h.date === dateStr);
                                        const weekDay = d.toLocaleDateString('pt-BR', { weekday: 'short' }).slice(0, 1).toUpperCase();
                                        const isFuture = d > new Date(); 
                                        
                                        return (
                                            <div key={i} className={`flex flex-col items-center gap-2 ${isFuture ? 'opacity-30' : ''}`}>
                                                <div className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all ${workoutDone ? 'bg-green-500 text-white shadow-md scale-110' : 'bg-gray-100 text-gray-300'}`}>
                                                    {workoutDone ? workoutDone.type : ''}
                                                </div>
                                                <span className={`text-[10px] font-bold ${workoutDone ? 'text-black' : 'text-gray-300'}`}>{weekDay}</span>
                                            </div>
                                        )
                                    })}
                                </div>
                            </section>
                        </main>
                    </div>
                );
            }

            if (view === 'edit_workout') {
                return (
                    <div className="max-w-lg mx-auto min-h-screen bg-gray-50 pb-32 animate-fade-in relative">
                         <div className="bg-white sticky top-0 z-20 px-6 py-4 shadow-sm border-b border-gray-100 flex items-center justify-between">
                            <button 
                                onClick={() => setView('dashboard')}
                                className="p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors"
                            >
                                <ChevronLeft size={24} />
                            </button>
                            <h2 className="text-xl font-black italic tracking-tight">EDITAR TREINO {currentWorkout}</h2>
                            <div className="w-10"></div>
                        </div>

                        <main className="p-6 space-y-3">
                            <div className="bg-blue-50 text-blue-800 text-xs font-bold p-3 rounded-xl text-center mb-4">
                                Dica: Deslize um exercício para a esquerda para excluir.
                            </div>

                            {user.workouts[currentWorkout].length === 0 && (
                                <div className="text-center py-10 text-gray-400">
                                    <p>Nenhum exercício neste treino.</p>
                                </div>
                            )}

                            {user.workouts[currentWorkout].map((ex, idx) => (
                                <SwipeableListItem key={ex.id || idx} onDelete={() => removeExercise(idx)}>
                                    <div className="p-4 flex items-center justify-between">
                                        <div className="flex items-center gap-4">
                                            <div className="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-gray-500 font-bold">
                                                {idx + 1}
                                            </div>
                                            <div>
                                                <h4 className="font-bold text-gray-900 leading-tight">{ex.name}</h4>
                                                <p className="text-xs text-gray-500 mt-0.5">{ex.reps} • {ex.load}</p>
                                            </div>
                                        </div>
                                    </div>
                                </SwipeableListItem>
                            ))}

                            <button 
                                onClick={() => { setShowAddModal(true); setIsCustomExercise(false); }}
                                className="w-full py-4 border-2 border-dashed border-gray-300 rounded-2xl text-gray-400 font-bold hover:border-black hover:text-black transition-all flex items-center justify-center gap-2 mt-4"
                            >
                                <Plus size={20} /> Adicionar Exercício
                            </button>
                        </main>

                         {/* Add Exercise Modal */}
                         {showAddModal && (
                            <div className="fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm animate-fade-in">
                                <div className="bg-white w-full max-w-lg rounded-t-[32px] p-8 animate-slide-up h-[85vh] overflow-y-auto no-scrollbar">
                                    <div className="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
                                    <h3 className="text-xl font-bold mb-6 text-gray-900">Novo Exercício</h3>
                                    
                                    <form onSubmit={(e) => {
                                        e.preventDefault();
                                        addExercise({
                                            name: e.target.name.value,
                                            reps: e.target.reps.value,
                                            load: e.target.load.value,
                                            rest: e.target.rest.value,
                                            img: e.target.img ? e.target.img.value : ''
                                        });
                                    }} className="space-y-4">
                                        
                                        <div>
                                            <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">
                                                Nome do Exercício
                                            </label>
                                            
                                            {!isCustomExercise ? (
                                                <select 
                                                    name="name" 
                                                    required 
                                                    className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none appearance-none"
                                                    onChange={(e) => {
                                                        if (e.target.value === 'custom') {
                                                            setIsCustomExercise(true);
                                                            e.target.value = '';
                                                        }
                                                    }}
                                                >
                                                    <option value="" disabled selected>Selecione da lista...</option>
                                                    {BASIC_EXERCISES_LIST.map(ex => (
                                                        <option key={ex} value={ex}>{ex}</option>
                                                    ))}
                                                    <option value="custom" className="font-bold text-blue-600">+ Criar outro exercício...</option>
                                                </select>
                                            ) : (
                                                <div className="flex gap-2">
                                                    <input 
                                                        name="name" 
                                                        required 
                                                        autoFocus
                                                        className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none" 
                                                        placeholder="Digite o nome..." 
                                                    />
                                                    <button 
                                                        type="button"
                                                        onClick={() => setIsCustomExercise(false)}
                                                        className="px-4 bg-gray-200 rounded-xl font-bold text-gray-500 text-xs hover:bg-gray-300"
                                                    >
                                                        Voltar
                                                    </button>
                                                </div>
                                            )}
                                        </div>

                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Séries/Reps</label>
                                                <input name="reps" required className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none" placeholder="Ex: 4 x 10" />
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Carga Inicial</label>
                                                <input name="load" required className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none" placeholder="Ex: 10kg" />
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Descanso (seg)</label>
                                                <input name="rest" required type="number" className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none" placeholder="60" />
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Imagem (Opcional)</label>
                                                <input name="img" className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none" placeholder="URL da foto" />
                                                <p className="text-[10px] text-gray-500 mt-1">Cole aqui o link de uma imagem do Hipertrofia.org se desejar.</p>
                                            </div>
                                        </div>

                                        <div className="pt-4 flex gap-3">
                                            <button type="button" onClick={() => setShowAddModal(false)} className="flex-1 py-4 font-bold text-gray-500 bg-gray-100 rounded-2xl">Cancelar</button>
                                            <button type="submit" className="flex-1 py-4 font-bold text-white bg-black rounded-2xl">Adicionar</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            if (view === 'workout') {
                const progress = Math.round((completedExercises.length / user.workouts[currentWorkout].length) * 100);

                return (
                    <div className="max-w-lg mx-auto min-h-screen bg-gray-50 pb-32 animate-fade-in">
                        <div className="bg-white sticky top-0 z-20 px-6 py-4 shadow-sm border-b border-gray-100">
                            <div className="flex items-center justify-between mb-4">
                                <button 
                                    onClick={() => setView('dashboard')}
                                    className="p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors"
                                >
                                    <ChevronLeft size={24} />
                                </button>
                                <div className="text-center">
                                    <h2 className="text-xl font-black italic tracking-tight">TREINO {currentWorkout}</h2>
                                    <p className="text-xs font-bold text-gray-400 uppercase tracking-widest">{completedExercises.length} de {user.workouts[currentWorkout].length}</p>
                                </div>
                                <div className="w-10"></div> 
                            </div>
                            
                            <div className="h-1.5 w-full bg-gray-100 rounded-full overflow-hidden">
                                <div 
                                    className="h-full bg-black transition-all duration-500 ease-out"
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>

                        <main className="p-6 space-y-2">
                            {user.workouts[currentWorkout].map((ex, idx) => (
                                <ExerciseCard 
                                    key={ex.id} 
                                    exercise={ex}
                                    isDone={completedExercises.includes(idx)}
                                    onCheck={() => {
                                        if (completedExercises.includes(idx)) {
                                            setCompletedExercises(prev => prev.filter(i => i !== idx));
                                        } else {
                                            setCompletedExercises(prev => [...prev, idx]);
                                        }
                                    }}
                                    onEdit={() => setEditingIndex(idx)}
                                />
                            ))}
                        </main>

                        <div className="fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-white via-white to-transparent max-w-lg mx-auto">
                            <button 
                                onClick={finishWorkout}
                                disabled={completedExercises.length === 0}
                                className={`w-full py-5 rounded-[24px] font-black text-sm uppercase tracking-widest shadow-xl transition-all transform active:scale-95 ${completedExercises.length > 0 ? 'bg-green-500 text-white hover:bg-green-600' : 'bg-gray-200 text-gray-400 cursor-not-allowed'}`}
                            >
                                {completedExercises.length === user.workouts[currentWorkout].length ? 'Concluir Treino 🎉' : 'Finalizar Treino'}
                            </button>
                        </div>

                        {/* Edit Modal (During Workout) */}
                        {editingIndex !== null && (
                            <div className="fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm animate-fade-in">
                                <div className="bg-white w-full max-w-lg rounded-t-[32px] p-8 animate-slide-up">
                                    <div className="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
                                    <h3 className="text-xl font-bold mb-6 text-gray-900">Editar {user.workouts[currentWorkout][editingIndex].name}</h3>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Carga (Peso)</label>
                                            <input 
                                                id="editLoad" 
                                                defaultValue={user.workouts[currentWorkout][editingIndex].load}
                                                className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none"
                                            />
                                        </div>
                                        <div className="flex gap-4">
                                            <div className="flex-1">
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Repetições</label>
                                                <input 
                                                    id="editReps" 
                                                    defaultValue={user.workouts[currentWorkout][editingIndex].reps}
                                                    className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none"
                                                />
                                            </div>
                                            <div className="flex-1">
                                                <label className="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 block">Descanso (s)</label>
                                                <input 
                                                    id="editRest" 
                                                    defaultValue={user.workouts[currentWorkout][editingIndex].rest}
                                                    className="w-full bg-gray-100 p-4 rounded-xl font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none"
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    <div className="flex gap-3 mt-8">
                                        <button 
                                            onClick={() => setEditingIndex(null)}
                                            className="flex-1 py-4 font-bold text-gray-500 bg-gray-100 rounded-2xl"
                                        >
                                            Cancelar
                                        </button>
                                        <button 
                                            onClick={() => saveEdit(
                                                document.getElementById('editReps').value,
                                                document.getElementById('editLoad').value,
                                                document.getElementById('editRest').value
                                            )}
                                            className="flex-1 py-4 font-bold text-white bg-black rounded-2xl"
                                        >
                                            Salvar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {/* Success Modal */}
                        {showFinishedModal && (
                            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-6 animate-fade-in">
                                <div className="bg-white w-full max-w-sm rounded-[40px] p-8 text-center relative overflow-hidden">
                                    <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 to-blue-500"></div>
                                    
                                    <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-500 animate-bounce-short">
                                        <Trophy size={48} fill="currentColor" />
                                    </div>
                                    
                                    <h2 className="text-3xl font-black text-gray-900 mb-2">TREINO PAGO!</h2>
                                    <p className="text-gray-500 mb-8">Parabéns pela constância. Seu próximo treino sugerido será o <b>Treino {getSuggestedWorkout()}</b>.</p>
                                    
                                    <button 
                                        onClick={() => {
                                            setShowFinishedModal(false);
                                            setView('dashboard');
                                        }}
                                        className="w-full bg-black text-white py-5 rounded-2xl font-bold text-sm uppercase tracking-widest hover:scale-[1.02] transition-transform"
                                    >
                                        Continuar Focada
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FlexLogApp />);
    </script>
</body>
</html>
